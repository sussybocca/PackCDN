<!DOCTYPE html>
<html>
<head>
  <title>PackCDN - Portal Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
      line-height: 1.6;
      color: #333;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    
    .header {
      text-align: center;
      color: white;
      padding: 40px 20px 20px;
    }
    
    .header h1 {
      font-size: 3rem;
      margin-bottom: 10px;
      font-weight: 800;
      text-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }
    
    .header p {
      font-size: 1.2rem;
      opacity: 0.9;
    }
    
    .game-container {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      flex: 1;
    }
    
    canvas {
      background: #1a1a2e;
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.5);
      max-width: 100%;
      height: auto;
      border: 3px solid rgba(255,255,255,0.2);
    }
    
    .controls {
      text-align: center;
      color: white;
      padding: 20px;
      font-size: 1rem;
      background: rgba(0,0,0,0.2);
      margin: 0 20px 20px;
      border-radius: 50px;
      backdrop-filter: blur(5px);
    }
    
    .controls kbd {
      background: rgba(255,255,255,0.2);
      padding: 4px 8px;
      border-radius: 5px;
      margin: 0 4px;
      border: 1px solid rgba(255,255,255,0.5);
    }
    
    footer {
      text-align: center;
      color: rgba(255,255,255,0.8);
      padding: 20px;
      font-size: 0.9rem;
      margin-top: auto;
    }
    
    footer a {
      color: white;
      margin: 0 10px;
      text-decoration: none;
      font-weight: 500;
    }
    
    footer a:hover {
      text-decoration: underline;
    }
    
    @media (max-width: 600px) {
      .header h1 { font-size: 2rem; }
      canvas { width: 100%; height: auto; }
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>üöÄ PackCDN Portal</h1>
    <p>Move with arrow keys or WASD. Touch a portal to enter.</p>
  </div>
  
  <div class="game-container">
    <canvas id="gameCanvas" width="800" height="500"></canvas>
  </div>
  
  <div class="controls">
    <span><kbd>‚Üë</kbd> <kbd>‚Üì</kbd> <kbd>‚Üê</kbd> <kbd>‚Üí</kbd> or <kbd>W</kbd> <kbd>A</kbd> <kbd>S</kbd> <kbd>D</kbd> to move</span>
    <span style="margin-left: 30px;">üîµ Create Pack &nbsp;&nbsp; üü£ Explore Packs</span>
  </div>
  
  <footer>
    <a href="Pages/Editor/editor.html">Create</a>
    <a href="Pages/Explore/explore.html">Explore</a>
    <a href="https://github.com/sussybocca/PackCDN/tree/main">GitHub</a>
  </footer>

  <script>
    (function() {
      const canvas = document.getElementById('gameCanvas');
      const ctx = canvas.getContext('2d');

      // Player settings
      const player = {
        x: 400,
        y: 250,
        radius: 15,
        speed: 4
      };

      // Portal definitions
      const portals = [
        { x: 100, y: 250, width: 80, height: 120, color: '#667eea', label: 'CREATE', url: 'Pages/Editor/editor.html' },
        { x: 620, y: 250, width: 80, height: 120, color: '#9f7aea', label: 'EXPLORE', url: 'Pages/Explore/explore.html' }
      ];

      // Boundaries (keep player inside canvas)
      const minX = player.radius;
      const maxX = canvas.width - player.radius;
      const minY = player.radius;
      const maxY = canvas.height - player.radius;

      // Key state
      const keys = {
        ArrowUp: false, ArrowDown: false, ArrowLeft: false, ArrowRight: false,
        KeyW: false, KeyA: false, KeyS: false, KeyD: false
      };

      window.addEventListener('keydown', (e) => {
        if (keys.hasOwnProperty(e.code)) {
          e.preventDefault(); // Prevent page scrolling
          keys[e.code] = true;
        }
      });

      window.addEventListener('keyup', (e) => {
        if (keys.hasOwnProperty(e.code)) {
          keys[e.code] = false;
        }
      });

      // Prevent context menu on canvas
      canvas.addEventListener('contextmenu', (e) => e.preventDefault());

      // Game loop
      function update() {
        // Calculate movement
        let dx = 0, dy = 0;
        if (keys.ArrowUp || keys.KeyW) dy -= 1;
        if (keys.ArrowDown || keys.KeyS) dy += 1;
        if (keys.ArrowLeft || keys.KeyA) dx -= 1;
        if (keys.ArrowRight || keys.KeyD) dx += 1;

        if (dx !== 0 || dy !== 0) {
          // Normalize diagonal speed
          const length = Math.sqrt(dx*dx + dy*dy);
          dx = (dx / length) * player.speed;
          dy = (dy / length) * player.speed;
          
          // Move and clamp
          player.x = Math.min(maxX, Math.max(minX, player.x + dx));
          player.y = Math.min(maxY, Math.max(minY, player.y + dy));
        }

        // Portal collision
        for (let portal of portals) {
          const left = portal.x - portal.width/2;
          const right = portal.x + portal.width/2;
          const top = portal.y - portal.height/2;
          const bottom = portal.y + portal.height/2;
          
          // Simple rectangle-circle collision
          const closestX = Math.max(left, Math.min(player.x, right));
          const closestY = Math.max(top, Math.min(player.y, bottom));
          const distance = Math.sqrt((player.x - closestX)**2 + (player.y - closestY)**2);
          
          if (distance < player.radius) {
            window.location.href = portal.url;
            return; // stop further execution
          }
        }

        draw();
        requestAnimationFrame(update);
      }

      function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Draw floor pattern (grid)
        ctx.strokeStyle = 'rgba(255,255,255,0.05)';
        ctx.lineWidth = 1;
        for (let i = 0; i < canvas.width; i += 40) {
          ctx.beginPath();
          ctx.moveTo(i, 0);
          ctx.lineTo(i, canvas.height);
          ctx.strokeStyle = 'rgba(255,255,255,0.03)';
          ctx.stroke();
        }
        for (let i = 0; i < canvas.height; i += 40) {
          ctx.beginPath();
          ctx.moveTo(0, i);
          ctx.lineTo(canvas.width, i);
          ctx.stroke();
        }

        // Draw portals
        for (let portal of portals) {
          // Glow effect
          ctx.shadowColor = portal.color;
          ctx.shadowBlur = 30;
          
          // Portal body
          ctx.fillStyle = portal.color;
          ctx.beginPath();
          ctx.ellipse(portal.x, portal.y, portal.width/2, portal.height/2, 0, 0, Math.PI*2);
          ctx.fill();
          
          // Inner swirl
          ctx.shadowBlur = 15;
          ctx.fillStyle = 'rgba(255,255,255,0.3)';
          ctx.beginPath();
          ctx.ellipse(portal.x, portal.y, portal.width/4, portal.height/4, 0, 0, Math.PI*2);
          ctx.fill();
          
          // Reset shadow
          ctx.shadowBlur = 0;
          ctx.shadowColor = 'transparent';
          
          // Label
          ctx.fillStyle = 'white';
          ctx.font = 'bold 20px Inter, -apple-system, sans-serif';
          ctx.textAlign = 'center';
          ctx.textBaseline = 'middle';
          ctx.fillText(portal.label, portal.x, portal.y - 50);
        }

        // Draw player (character)
        ctx.shadowColor = '#a78bfa';
        ctx.shadowBlur = 20;
        ctx.fillStyle = '#ffdbb5';
        ctx.beginPath();
        ctx.arc(player.x, player.y, player.radius, 0, 2*Math.PI);
        ctx.fill();
        
        // Eyes
        ctx.shadowBlur = 0;
        ctx.fillStyle = '#ffffff';
        ctx.beginPath();
        ctx.arc(player.x-5, player.y-4, 3, 0, 2*Math.PI);
        ctx.fill();
        ctx.beginPath();
        ctx.arc(player.x+5, player.y-4, 3, 0, 2*Math.PI);
        ctx.fill();
        
        ctx.fillStyle = '#000000';
        ctx.beginPath();
        ctx.arc(player.x-5, player.y-4, 1.5, 0, 2*Math.PI);
        ctx.fill();
        ctx.beginPath();
        ctx.arc(player.x+5, player.y-4, 1.5, 0, 2*Math.PI);
        ctx.fill();
        
        // Hat (optional)
        ctx.fillStyle = '#3f4d7a';
        ctx.beginPath();
        ctx.ellipse(player.x, player.y-18, 12, 6, 0, 0, 2*Math.PI);
        ctx.fill();
      }

      // Start game
      update();

      // Handle window resize (maintain aspect ratio if needed)
      window.addEventListener('resize', () => {
        // Canvas size is fixed, nothing to do
      });
    })();
  </script>
</body>
</html>
